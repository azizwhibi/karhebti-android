# ğŸ—ºï¸ FLUX VISUEL - Distance & DurÃ©e d'ArrivÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUX COMPLET - AFFICHAGE DISTANCE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£  CLIENT CRÃ‰E UN SOS
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ğŸ“± CLIENT     â”‚
    â”‚   36.8065 N     â”‚  â† Position GPS capturÃ©e
    â”‚   10.1815 E     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    Status: PENDING
    âŒ Pas de distance affichÃ©e


2ï¸âƒ£  GARAGE ACCEPTE LE SOS
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ¢ GARAGE      â”‚
    â”‚   36.8500 N     â”‚  â† Position du garage
    â”‚   10.2100 E     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    Status: ACCEPTED
    âœ… CALCUL AUTOMATIQUE :
       Distance = 5.8 km (Haversine)
       ETA = 9 min (Ã  40 km/h)


3ï¸âƒ£  AFFICHAGE Ã‰CRAN DE SUIVI

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘          ğŸ“± Ã‰cran Suivi SOS              â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘                                          â•‘
    â•‘      âœ“ AcceptÃ©                           â•‘
    â•‘                                          â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘  â„¹ï¸ L'assistant est en route             â•‘
    â•‘                                          â•‘
    â•‘     ğŸš—           â”‚        â±ï¸             â•‘
    â•‘   Distance      â”‚   ArrivÃ©e estimÃ©e     â•‘
    â•‘    5.8 km       â”‚       9 min           â•‘
    â•‘                                          â•‘
    â•‘  ğŸ§­ L'assistant se dirige vers          â•‘
    â•‘     votre position                       â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘                                          â•‘
    â•‘         [CARTE INTERACTIVE]              â•‘
    â•‘                                          â•‘
    â•‘         ğŸ¢ (36.8500, 10.2100)            â•‘
    â•‘          â”‚                               â•‘
    â•‘          â”‚ â•â•â•â•â•â•â• 5.8 km â•â•â•â•â•â•â•       â•‘
    â•‘          â”‚                               â•‘
    â•‘         ğŸ“ (36.8065, 10.1815)            â•‘
    â•‘                                          â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘  ğŸ“± Appeler l'assistant                  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


4ï¸âƒ£  GARAGE CHANGE STATUT â†’ IN_PROGRESS

    Status: IN_PROGRESS
    âœ… Affichage mis Ã  jour :
       "L'assistant est sur place et 
        travaille sur votre vÃ©hicule"


5ï¸âƒ£  TERMINÃ‰

    Status: COMPLETED
    âŒ Carte de distance cachÃ©e
    âœ… Message : "Intervention terminÃ©e"
```

---

## ğŸ“Š DIAGRAMME DE FLUX DE DONNÃ‰ES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT    â”‚                    â”‚   BACKEND    â”‚
â”‚  Position   â”‚â”€â”€â”€â”€â”€ POST SOS â”€â”€â”€â”€â–¶â”‚   MongoDB    â”‚
â”‚ (Lat, Lon)  â”‚                    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ Stockage
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  Breakdown   â”‚
â”‚   GARAGE    â”‚â—€â”€â”€â”€â”€ Liste SOS â”€â”€â”€â”€â”‚   Document   â”‚
â”‚  Accepte    â”‚                    â”‚  status:     â”‚
â”‚    SOS      â”‚                    â”‚  PENDING     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                   â”‚
      â””â”€â”€â”€â”€â”€ PUT status=ACCEPTED â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
                                          â”‚ Update
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Breakdown   â”‚
                                   â”‚  assignedTo  â”‚â—€â”€â”€â”
                                   â”‚  status:     â”‚   â”‚
                                   â”‚  ACCEPTED    â”‚   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                          â”‚           â”‚
                                          â”‚ Populate  â”‚
                                          â–¼           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   CLIENT    â”‚â—€â”€â”€ GET /breakdown â”€â”‚ assignedTo   â”‚  â”‚
â”‚  Ouvre      â”‚                    â”‚   Details    â”‚  â”‚
â”‚  Suivi SOS  â”‚                    â”‚ (lat, lon)   â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â””â”€â”€â”€â”€â”€â”€â–¶ CALCUL LOCAL
              â”œâ”€ Distance (Haversine)
              â”œâ”€ ETA (vitesse moy)
              â””â”€ Affichage carte
```

---

## ğŸ”„ CYCLE DE MISE Ã€ JOUR

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   POLLING AUTOMATIQUE (10 sec)      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  fetchBreakdownById(breakdownId)    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Breakdown Response reÃ§ue          â”‚
     â”‚   - latitude client                 â”‚
     â”‚   - longitude client                â”‚
     â”‚   - assignedToDetails               â”‚
     â”‚     - latitude garage               â”‚
     â”‚     - longitude garage              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   CALCUL AUTOMATIQUE                â”‚
     â”‚                                     â”‚
     â”‚   distance = calculateDistance(     â”‚
     â”‚     clientLat, clientLon,           â”‚
     â”‚     garageLat, garageLon            â”‚
     â”‚   )                                 â”‚
     â”‚                                     â”‚
     â”‚   eta = estimateETA(distance)       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   UI MISE Ã€ JOUR                    â”‚
     â”‚   - DistanceCard affichÃ©e           â”‚
     â”‚   - Carte avec 2 marqueurs          â”‚
     â”‚   - Ligne bleue tracÃ©e              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
              (Attendre 10 sec)
                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚
                                  â–¼
                              [RÃ‰PÃˆTE]
```

---

## ğŸ§® CALCUL DE DISTANCE (HAVERSINE)

```
Formule de Haversine
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EntrÃ©es:
  lat1, lon1  â† Position CLIENT
  lat2, lon2  â† Position GARAGE

Calcul:
  dLat = (lat2 - lat1) Ã— Ï€/180
  dLon = (lon2 - lon1) Ã— Ï€/180

  a = sinÂ²(dLat/2) + cos(lat1) Ã— cos(lat2) Ã— sinÂ²(dLon/2)
  
  c = 2 Ã— atan2(âˆša, âˆš(1-a))
  
  distance = R Ã— c    (R = 6371 km, rayon Terre)

Sortie:
  distance en kilomÃ¨tres

Exemple:
  Client:  36.8065, 10.1815
  Garage:  36.8500, 10.2100
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Distance: 5.8 km
```

---

## â±ï¸ CALCUL ETA (Temps EstimÃ©)

```
Estimation du Temps d'ArrivÃ©e
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EntrÃ©es:
  distance (km)
  vitesse moyenne = 40 km/h

Calcul:
  temps (heures) = distance / vitesse
  temps (minutes) = temps Ã— 60

Formatage:
  Si < 1 min     â†’ "< 1 min"
  Si < 60 min    â†’ "X min"
  Si >= 60 min   â†’ "X h Y min"

Exemples:
  0.2 km  â†’ < 1 min
  2.0 km  â†’ 3 min
  5.8 km  â†’ 9 min
  30 km   â†’ 45 min
  50 km   â†’ 1 h 15 min
```

---

## ğŸ—ºï¸ AFFICHAGE CARTE MULTIPLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    OpenStreetMapViewMultiple           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚     ğŸ¢ Marqueur GARAGE (bleu)          â”‚
â”‚      â”œâ”€ position: (lat2, lon2)         â”‚
â”‚      â”œâ”€ title: "Assistant"             â”‚
â”‚      â””â”€ snippet: "Garage"              â”‚
â”‚                                        â”‚
â”‚      â”‚                                 â”‚
â”‚      â”‚  Polyline (ligne bleue)         â”‚
â”‚      â”‚  - couleur: bleu (#0000FF)      â”‚
â”‚      â”‚  - Ã©paisseur: 5px               â”‚
â”‚      â”‚                                 â”‚
â”‚                                        â”‚
â”‚     ğŸ“ Marqueur CLIENT (rouge)         â”‚
â”‚      â”œâ”€ position: (lat1, lon1)         â”‚
â”‚      â”œâ”€ title: "Votre position"        â”‚
â”‚      â””â”€ snippet: "Client"              â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Zoom automatique:                     â”‚
â”‚  - Calcul BoundingBox des 2 points     â”‚
â”‚  - Zoom pour voir les 2 marqueurs      â”‚
â”‚  - Padding: 100px                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Ã‰TATS VISUELS

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              Ã‰TAT: PENDING                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âš ï¸ En attente...                                  â•‘
â•‘                                                    â•‘
â•‘  [Carte simple - 1 marqueur client]                â•‘
â•‘                                                    â•‘
â•‘  âŒ Pas de carte de distance                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              Ã‰TAT: ACCEPTED                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âœ“ AcceptÃ©                                         â•‘
â•‘                                                    â•‘
â•‘  âœ… Carte de distance affichÃ©e                     â•‘
â•‘     "L'assistant se dirige vers votre position"    â•‘
â•‘                                                    â•‘
â•‘  [Carte multiple - 2 marqueurs + ligne]            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              Ã‰TAT: IN_PROGRESS                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ”§ En cours                                       â•‘
â•‘                                                    â•‘
â•‘  âœ… Carte de distance affichÃ©e                     â•‘
â•‘     "L'assistant est sur place et travaille..."    â•‘
â•‘                                                    â•‘
â•‘  [Carte multiple - 2 marqueurs + ligne]            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              Ã‰TAT: COMPLETED                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âœ“ TerminÃ©                                         â•‘
â•‘                                                    â•‘
â•‘  [Carte simple - 1 marqueur client]                â•‘
â•‘                                                    â•‘
â•‘  âŒ Carte de distance cachÃ©e                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“ EXEMPLE CONCRET

```
SCÃ‰NARIO RÃ‰EL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Client en panne: Avenue Habib Bourguiba, Tunis
  ğŸ“ Latitude:  36.8065
  ğŸ“ Longitude: 10.1815

Garage assignÃ©: La Marsa
  ğŸ¢ Latitude:  36.8500
  ğŸ¢ Longitude: 10.2100

CALCULS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Distance (Haversine):
  Î”lat = 0.0435  â†’  4.84 km
  Î”lon = 0.0285  â†’  2.85 km
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Distance rÃ©elle: 5.8 km

ETA (40 km/h):
  Temps = 5.8 / 40 = 0.145 h
  Temps = 0.145 Ã— 60 = 8.7 min
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ETA affichÃ©: "9 min"

AFFICHAGE UI
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    ğŸš— Distance      |  â±ï¸ ArrivÃ©e estimÃ©e
       5.8 km        |       9 min

    ğŸ§­ L'assistant se dirige vers votre position

    [CARTE]
    ğŸ¢ â† Garage (La Marsa)
    â”‚
    â”‚  â•â•â• 5.8 km â•â•â•
    â”‚
    ğŸ“ â† Vous (Centre Ville)
```

---

## ğŸ”§ ARCHITECTURE TECHNIQUE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ARCHITECTURE COMPLÃˆTE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COUCHE PRÃ‰SENTATION (UI)
â”œâ”€ BreakdownTrackingScreenWrapper
â”‚  â””â”€ Gestion Ã©tat + polling 10 sec
â”‚
â”œâ”€ BreakdownTrackingScreen
â”‚  â”œâ”€ StatusCard
â”‚  â”œâ”€ DistanceCard âœ¨ NOUVEAU
â”‚  â”‚  â”œâ”€ Distance formatÃ©e
â”‚  â”‚  â”œâ”€ ETA calculÃ©
â”‚  â”‚  â””â”€ Message contextuel
â”‚  â”‚
â”‚  â”œâ”€ OpenStreetMapViewMultiple âœ¨ NOUVEAU
â”‚  â”‚  â”œâ”€ Marqueur client (rouge)
â”‚  â”‚  â”œâ”€ Marqueur garage (bleu)
â”‚  â”‚  â”œâ”€ Ligne bleue
â”‚  â”‚  â””â”€ Zoom automatique
â”‚  â”‚
â”‚  â”œâ”€ BreakdownInfoCard
â”‚  â”œâ”€ TimelineCard
â”‚  â””â”€ Bouton appel
â”‚
COUCHE CALCUL (Utils)
â”œâ”€ DistanceUtils
â”‚  â”œâ”€ calculateDistance() â† Haversine
â”‚  â”œâ”€ formatDistance() â† "X.X km"
â”‚  â””â”€ estimateETA() â† "X min"
â”‚
COUCHE DONNÃ‰ES (Model)
â”œâ”€ BreakdownResponse âœ¨ MODIFIÃ‰
â”‚  â”œâ”€ latitude (client)
â”‚  â”œâ”€ longitude (client)
â”‚  â”œâ”€ assignedTo (ID)
â”‚  â””â”€ assignedToDetails âœ¨ NOUVEAU
â”‚     â”œâ”€ latitude (garage)
â”‚     â”œâ”€ longitude (garage)
â”‚     â”œâ”€ nom, prenom
â”‚     â””â”€ telephone
â”‚
COUCHE RÃ‰SEAU (API)
â”œâ”€ BreakdownsApi
â”‚  â””â”€ getBreakdown(id)
â”‚     â””â”€ Backend popule assignedToDetails
```

---

## âœ… RÃ‰SUMÃ‰ VISUEL

```
AVANT                           APRÃˆS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  [Carte simple]                [Carte amÃ©liorÃ©e]
     ğŸ“                            ğŸ¢
  Un marqueur                      â”‚
                                   â”‚  Ligne bleue
  âŒ Pas de distance              ğŸ“
  âŒ Pas d'ETA                   Deux marqueurs

                                âœ… Distance: 5.8 km
                                âœ… ETA: 9 min
                                âœ… Message contextuel
                                âœ… MAJ temps rÃ©el
```

---

**ğŸ‰ FONCTIONNALITÃ‰ COMPLÃˆTE ET OPÃ‰RATIONNELLE !**

